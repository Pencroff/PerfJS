<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PerformanceJS</title>
    <link rel="stylesheet" href="assets/style/blaze.min.css">
    <link rel="stylesheet" href="assets/style/blaze.animations.min.css">
    <link rel="stylesheet" href="assets/style/app.css">
    <link rel="shortcut icon" type="image/png" href="./assets/img/stopwatch.png"/>
</head>
<body class="c-text">
<nav class="c-nav c-nav--inline">
    <li class="c-nav__item c-nav__item--no-hover c-text--loud">Performance JS</li>
</nav>
<div class="o-grid o-panel o-panel--nav-top">
    <div class="o-grid__cell--width-30 o-panel-container">
        <div class="o-panel">
            <nav class="c-nav c-nav--top c-nav--light c-nav--inline">
                    <span class="c-nav__content" style="width: 100%">
                        <div class="c-input-group">
                            <input class="c-field c-field--small" type="text">
                            <button class="c-button c-button--primary c-button--small">Search</button>
                        </div>
                    </span>
            </nav>
            <div class="c-test-list o-panel o-panel--nav-top">
            </div>
        </div>
    </div>
    <div class="o-grid__cell--width-70 o-panel-container">
        <div class="c-test-detail o-panel">
            60%
        </div>
    </div>
</div>

<script src="assets/js/script.min.js"></script>
<script>
    $script.path('');
    $script(['assets/js/lodash.min.js', 'assets/js/platform.js', 'assets/js/benchmark.js',
        'assets/js/director.min.js', 'assets/js/domtastic.min.js', 'assets/js/doT.min.js',
        'data.js'], function () {
        var list = window.testList;
        var selected = list[0];

        var testListContainer = $('.c-test-list')[0];
        var listItemTemplate = [
            '<div class="c-card c-card--test-desc">',
            '<div class="c-card__content c-card__content--divider">{{=it.name}}</div>',
            '<div class="c-card__content">',
            '<p class="c-paragraph">{{=it.description}}</p>',
            '<br/>',
            '<p class="c-paragraph">Tags:&nbsp',
            '{{~it.tags :tag:index}}',
            '<button type="button" class="c-button c-button--primary c-button--xsmall c-tag">',
            '{{=tag}}',
            '</button>',
            '{{~}}',
            '</p>',
            '</div>',
            '</div>'
        ].join('');
        var listItemTemplateFn = doT.template(listItemTemplate);

        var detailContainer = $('.c-test-detail')[0];
        var detailTemplate = [
            '<div class="c-test-details">',
            '<h2>{{=it.name}}</h2>',
            '<div class="c-tabs c-tabs--success a-tabs a-tabs--slow">',
            '<div class="c-tabs__headings">',
            '<div class="c-tab-heading c-tab-heading--active">Test</div>',
            '<div class="c-tab-heading">Source</div>',
            '</div>',
            '<div class="c-tabs__tab c-tabs__tab--active">',
            '<button type="button" class="c-button c-button--secondary">Run test</button>',
            '<table class="c-table c-table--striped">',
            '<thead class="c-table__head">',
            '<tr class="c-table__row c-table__row--heading">',
            '<th class="c-table__cell c-table__cell--case-header" colspan="2">Test</th>',
            '<th class="c-table__cell c-table__cell--case-result">Result (ops/sec)</th>',
            '</tr>',
            '</thead>',
            '<tbody class="c-table__body">',
            '<tr class="c-table__row">',
            '<td class="c-table__cell c-table__cell--case-name">Case name</td>',
            '<td class="c-table__cell c-table__cell--case-source">Case source</td>',
            '<td class="c-table__cell c-table__cell--case-result">256</td>',
            '</tr>',
            '</tbody>',
            '</table>',
            '</div>',
            '<div class="c-tabs__tab">This is Source tab</div>',
            '</div>',
            '</div>'
        ].join('');
        var detailTemplateFn = doT.template(detailTemplate);

        // testListContainer.innerHTML = '';
        testListContainer.innerHTML = list.map(function (item) {
            return listItemTemplateFn(item);
        }).join('');
        detailContainer.innerHTML = detailTemplateFn(selected);

        $('.c-tab-heading').on('click', function (e) {
            var targetEl = e.target;
            var nextIndex = targetEl.nextSibling ? 0 : 1;
            var contentPanels = $('.c-tabs__tab').removeClass('c-tabs__tab--active');
            $('.c-tab-heading')
                    .removeClass('c-tab-heading--active')
                    .forEach(function (el, index) {
                        if(index === nextIndex) {
                            $(el).addClass('c-tab-heading--active');
                            $(contentPanels[index]).addClass('c-tabs__tab--active');
                        }
                    });
        });
    });


    // selected
// Test example
//                var list = window.testList;
//                var selected = list[0];
//                toast(selected.url, function () {
//                    var test = window.test;
//                    var suite = new Benchmark.Suite;
//                    test.fill(suite);
//                    suite
//                    // add listeners
//                    .on('cycle', function(event) {
//                        console.log(String(event.target));
//                    })
//                    .on('complete', function() {
//                        console.log('Fastest is ' + this.filter('fastest').map('name'));
//                    })
//                    // run async
//                    .run({ 'async': true });
//                })
</script>
</body>
</html>